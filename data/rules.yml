version: "3.1"

rules:
- rule: Utterance for the intent greet
  steps:
  - intent: greet
  - action: action_greet_user

- rule: Utterance for user intent buy
  steps:
  - intent: shop_item
  - action: action_show_items

- rule: Selecting user's parent category of item
  steps:
  - intent: select_category
  - action: action_select_category

- rule: Fetch user details
  steps:
  - intent: user_details
  - action: user_details_form
  - active_loop: user_details_form

- rule: Submit user details form
  condition:
  - active_loop: user_details_form
  steps:
  - action: user_details_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_submit_user_details